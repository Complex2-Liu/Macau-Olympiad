\begin{prob}
\label{prob:prob-7}
\addcontentsline{toc}{section}{7. Problem 7}
记 $[x]$ 为小于或等于 $x$ 的最大整数. 如 $[\pi] = 3$.
定义数列 $a_1,a_2,\cdots$ 如下:
\[
\text{当 $n \ge 1$,}\quad a_n =
\frac{1}{n}\left(\left[\frac{n}{1}\right] +\left[\frac{n}{2}\right]
+ \cdots + \left[\frac{n}{n}\right]\right).
\]
\begin{enumerate}[label=(\alph*)]
\item 求证: 存在无穷多个整数 $n \ge 1$ 使得 $a_{n+1} > a_n$;
\item 确定并证明: 是否存在无穷多个整数 $n \ge 1$ 使得 $a_{n+1} < a_n$.
\end{enumerate}
\end{prob}

\begin{soln}
(b) 设 $a_n = \frac{1}{n}S_n$. 注意到我们有
\[
\begin{aligned}
S_{n+1} - S_n &= \left(\left[\frac{n+1}{1}\right] - \left[\frac{n}{1}\right]\right)
+ \left(\left[\frac{n+1}{2}\right] - \left[\frac{n}{2}\right]\right) + \cdots + \\
&\phantom{===}\left(\left[\frac{n+1}{n}\right] - \left[\frac{n}{n}\right]\right)
+ \left(\left[\frac{n+1}{n+1}\right] - \left[\frac{n}{n+1}\right]\right).
\end{aligned}
\]
对 $1 \le d \le n+1$, 显然 $[\frac{n+1}{d}] - [\frac{n}{d}] = 0$ 或 $1$, 并且
\[
\left[\frac{n+1}{d}\right] - \left[\frac{n}{d}\right] = 1 \iff d \divides n+1.
\]
所以 $S_{n+1} - S_n = \phi(n+1)$,
\begin{equation}
\label{eq9}
S_n = \sum_{i=1}^n \phi(i).
\end{equation}
其中 $\phi(n+1)$ 表示 $n+1$ 的因子的个数,
也就是说, 如果 $n+1$ 的素因子分解为 $p_1^{e_1}\cdots p_r^{e_r}$,
则 $\phi(n+1) = (e_1+1)\cdots(e_r+1)$.
此时问题可化简为: 是否存在无穷多个整数 $n \ge 1$,
使得 $\frac{S_{n+1}}{n+1} < \frac{S_n}{n}$, which is equivalent to
\begin{equation}
\label{eq10}
\phi(n+1) < \frac{1}{n}\sum_{i=1}^n \phi(i) = a_n.
\end{equation}
显然, 当 $n+1$ 为某个素数时, $\phi(n+1) = 2$,
而对任意整数 $i \ge 2, \phi(i) \ge 2$,
由此不难看出 $a_n > 2$ whenever $n \ge 6$.
所以, 当 $n = P-1$ 时, 其中 $P \ge 7$ 是素数, 就有 $a_{n+1} < a_n$,
而素数熟知是有无穷多个的.

(a) 显然 $[x] \le x$, 所以 $a_n \le \frac{1}{n}(\frac{n}{1} + \cdots + \frac{n}{n})
=\sum_{i=1}^n\frac{1}{i} =: H_n$, 其中 $H_n$ 为熟知的调和级数.

\begin{lem}
对 $n=2^k$, 我们有 $1 + \frac{k}{2} \le H_n$ 以及 $H_{n-1} \le k$.
特别的, 调和级数发散.
\end{lem}

\begin{proof}
经典的放缩:
\begin{multline*}
1 + \left(\frac{1}{2}\right) +\left(\frac{1}{3} + \frac{1}{4}\right)
+ \left(\frac{1}{5} + \frac{1}{6} + \frac{1}{7} + \frac{1}{8}\right) + \cdots
\ge\\ 1 + \frac{1}{2} + \left(\frac{1}{4} + \frac{1}{4}\right) + \cdots = 1 + \frac{k}{2}.
\end{multline*}
以及
\begin{multline*}
1 + \left(\frac{1}{2} + \frac{1}{3}\right) +
\left(\frac{1}{4} + \frac{1}{5} + \frac{1}{6} + \frac{1}{7}\right) + \cdots
\le\\ 1 + \left(\frac{1}{2} + \frac{1}{2}\right) +
\left(\frac{1}{4} + \frac{1}{4} + \frac{1}{4} + \frac{1}{4}\right) + \cdots = k.
\end{multline*}
\end{proof}

当 $n=2^k-1$ 时, 我们有 $\phi(n+1) = k+1 > k \ge H_n \ge a_n$,
which is equivalent to $a_{n+1} > a_n$ (c.f. \cref{eq10}).
\end{soln}
